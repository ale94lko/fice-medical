import{Q as y,T as k}from"./TextInput-DwMxryoT.js";import{b as I,Q as v,a as P}from"./QCard-DYqQgiEo.js";import{a as d,r as c,X as V,M as _,O as e,L as B,U as C,N as t,a0 as E,S as n,aD as S,R as w,Y as o,V as N,P as A,an as M}from"./index-Bx-TQmq5.js";import{e as R,f as T,Q as z}from"./constants-VGOGQPWE.js";import{Q as b}from"./QPage-BvFrJG05.js";import{u as D}from"./vue-i18n.runtime-CldFptek.js";import"./use-key-composition-RoCEy_xp.js";const L={class:"row justify-between login-container"},Z={class:"text-h6"},$={class:"forgot-password-container"},G={__name:"ResetPasswordPage",setup(q){const m=E(),p=R(),{t:s}=D(),h=d(()=>p.screen.width),Q=d(()=>h.value>=T.MD),l=c(""),i=c(!1),u=c(!1),f=d(()=>{const r=l.value.trim(),a=/^[A-Za-z0-9_-]+@[A-Za-z0-9.-]+\.[A-Za-z]{2,}$/;return r===""?"Email is required":r.length>32?"Email must be at most 32 characters":a.test(r)?"":"Please enter a valid email address"});async function x(){if(i.value=!!f.value,!i.value){u.value=!0;try{await M.post("/oauth/v1/reset-password",{email:l.value.trim()})}catch{}u.value=!1,p.notify({type:"positive",message:s("passwordResetEmailSent")}),await m.push("/login")}}return(r,a)=>(_(),V("div",L,[e(b,{class:"login-card flex flex-center"},{default:t(()=>[e(y,{class:"logo",src:"logo.png","spinner-color":"white"}),e(I,{class:"my-card bg-grey-1"},{default:t(()=>[n("form",{onSubmit:S(x,["prevent","stop"])},[e(v,null,{default:t(()=>[n("div",Z,w(o(s)("resetPassword")),1)]),_:1}),e(v,{class:"login-inputs"},{default:t(()=>[e(k,{modelValue:l.value,"onUpdate:modelValue":a[0]||(a[0]=g=>l.value=g),"icon-left":"mail","test-id":"input_email",maxlength:"32",label:o(s)("email"),"error-message":f.value,error:i.value},null,8,["modelValue","label","error-message","error"])]),_:1}),e(P,null,{default:t(()=>[e(N,{color:"primary",type:"submit",class:"full-width","data-testId":"button_continue",label:o(s)("continue"),loading:u.value},null,8,["label","loading"]),n("div",$,[e(z,{class:"forgot-password","data-testId":"button_back_to_login",onClick:a[1]||(a[1]=g=>o(m).push("/login"))},{default:t(()=>[A(w(o(s)("backToLogin")),1)]),_:1})])]),_:1})],32)]),_:1})]),_:1}),Q.value?(_(),B(b,{key:0,class:"promo-container"},{default:t(()=>a[2]||(a[2]=[n("div",{class:"promo"},null,-1)])),_:1})):C("",!0)]))}};export{G as default};
