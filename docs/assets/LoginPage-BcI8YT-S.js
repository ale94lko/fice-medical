import{Q as M,T as h}from"./TextInput-B1Cb6uCW.js";import{a as N,Q as y}from"./constants-DmufrzdJ.js";import{b as q,Q as D,a as T}from"./QCard-D-XawETv.js";import{_ as U,W as A,r as o,a as i,X as R,M as g,O as e,L as Q,U as x,N as a,a3 as W,a0 as j,S as v,aD as z,Y as u,P as V,R as P,V as F}from"./index-DkiPGnsD.js";import{Q as I}from"./QPage-yjuOD6wt.js";import{e as O}from"./use-quasar-Ctie1YIS.js";import{u as X}from"./vue-i18n.runtime-BGwwHX6I.js";import"./use-key-composition-DXtahxhC.js";const Y={class:"row justify-between login-container"},$={class:"forgot-password-container"},G={__name:"LoginPage",setup(H){const k=O(),w=j(),C=A(),r=o(""),t=o(""),d=o(!1),m=o(!1),c=o(""),p=o(!1),_=i(()=>{const n=/.+@.+\..+/.test(r.value);return r.value.trim()===""?"Email is required":n?"":"Please enter a valid email address"}),B=i(()=>t.value.trim()===""?"Password is required":""),{t:l}=X(),E=i(()=>k.screen.width),b=i(()=>E.value>=N.MD);async function S(){if(d.value=!!_.value,m.value=t.value.trim()==="",p.value=!0,!d.value&&!m.value)try{await C.login(r.value.trim(),t.value,l)&&await w.push("/")}catch(n){c.value=n.message}p.value=!1}function L(){w.push("/reset-password")}return(n,s)=>(g(),R("div",Y,[e(I,{class:W(["login-card flex flex-center",{mobile:!b.value}])},{default:a(()=>[e(M,{class:"logo",src:"logo.png","spinner-color":"white",style:{"max-width":"115px"}}),e(q,{class:"my-card bg-grey-1"},{default:a(()=>[v("form",{onSubmit:z(S,["prevent","stop"])},[e(D,{class:"login-inputs"},{default:a(()=>[e(h,{modelValue:r.value,"onUpdate:modelValue":s[0]||(s[0]=f=>r.value=f),"icon-left":"mail","test-id":"input_email",label:u(l)("email"),"error-message":_.value,error:d.value},null,8,["modelValue","label","error-message","error"]),e(h,{modelValue:t.value,"onUpdate:modelValue":s[1]||(s[1]=f=>t.value=f),"icon-left":"lock",type:"password","test-id":"input_password",label:u(l)("password"),"error-message":B.value,error:m.value},null,8,["modelValue","label","error-message","error"]),c.value?(g(),Q(y,{key:0,class:"login-error-msg"},{default:a(()=>[V(P(c.value),1)]),_:1})):x("",!0)]),_:1}),e(T,null,{default:a(()=>[e(F,{color:"primary",type:"submit",class:"full-width","data-testId":"button_sign_in",label:u(l)("sign_in"),loading:p.value},null,8,["label","loading"]),v("div",$,[e(y,{class:"forgot-password","data-testId":"button_forgot_password",onClick:L},{default:a(()=>[V(P(u(l)("forgot_password")),1)]),_:1})])]),_:1})],32)]),_:1})]),_:1},8,["class"]),b.value?(g(),Q(I,{key:0,class:"promo-container"},{default:a(()=>s[2]||(s[2]=[v("div",{class:"promo"},null,-1)])),_:1})):x("",!0)]))}},te=U(G,[["__scopeId","data-v-b837581d"]]);export{te as default};
