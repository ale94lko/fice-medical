import{Q as L,T as Q}from"./TextInput-DwMxryoT.js";import{e as M,f as N,Q as y}from"./constants-VGOGQPWE.js";import{b as q,Q as D,a as T}from"./QCard-DYqQgiEo.js";import{_ as U,W as A,r,a as d,X as R,M as v,O as e,L as V,U as I,N as s,a3 as W,a0 as $,S as g,aD as j,Y as i,P,R as k,V as z}from"./index-Bx-TQmq5.js";import{Q as x}from"./QPage-BvFrJG05.js";import{u as O}from"./vue-i18n.runtime-CldFptek.js";import"./use-key-composition-RoCEy_xp.js";const X={class:"row justify-between login-container"},Y={class:"forgot-password-container"},F={__name:"LoginPage",setup(G){const h=M(),w=$(),C=A(),t=r(""),l=r(""),m=r(!1),c=r(!1),p=r(""),f=r(!1),_=d(()=>{const n=/.+@.+\..+/.test(t.value);return t.value.trim()===""?"Email is required":n?"":"Please enter a valid email address"}),E=d(()=>l.value.trim()===""?"Password is required":""),{t:o}=O(),B=d(()=>h.screen.width),b=d(()=>B.value>=N.MD);async function S(){if(m.value=!!_.value,c.value=l.value.trim()==="",f.value=!0,!m.value&&!c.value)try{await C.login(t.value.trim(),l.value,o)&&await w.push("/")}catch(n){console.warn(n),p.value=o("networkError")}f.value=!1}return(n,a)=>(v(),R("div",X,[e(x,{class:W(["login-card flex flex-center",{mobile:!b.value}])},{default:s(()=>[e(L,{class:"logo",src:"logo.png","spinner-color":"white"}),e(q,{class:"my-card bg-grey-1"},{default:s(()=>[g("form",{onSubmit:j(S,["prevent","stop"])},[e(D,{class:"login-inputs"},{default:s(()=>[e(Q,{modelValue:t.value,"onUpdate:modelValue":a[0]||(a[0]=u=>t.value=u),"icon-left":"mail","test-id":"input_email",label:i(o)("email"),"error-message":_.value,error:m.value},null,8,["modelValue","label","error-message","error"]),e(Q,{modelValue:l.value,"onUpdate:modelValue":a[1]||(a[1]=u=>l.value=u),"icon-left":"lock",type:"password","test-id":"input_password",label:i(o)("password"),"error-message":E.value,error:c.value},null,8,["modelValue","label","error-message","error"]),p.value?(v(),V(y,{key:0,class:"login-error-msg"},{default:s(()=>[P(k(p.value),1)]),_:1})):I("",!0)]),_:1}),e(T,null,{default:s(()=>[e(z,{color:"primary",type:"submit",class:"full-width","data-testId":"button_sign_in",label:i(o)("signIn"),loading:f.value},null,8,["label","loading"]),g("div",Y,[e(y,{class:"forgot-password","data-testId":"button_forgot_password",onClick:a[2]||(a[2]=u=>i(w).push("/reset-password"))},{default:s(()=>[P(k(i(o)("forgotPassword")),1)]),_:1})])]),_:1})],32)]),_:1})]),_:1},8,["class"]),b.value?(v(),V(x,{key:0,class:"promo-container"},{default:s(()=>a[3]||(a[3]=[g("div",{class:"promo"},null,-1)])),_:1})):I("",!0)]))}},oe=U(F,[["__scopeId","data-v-98b9da9a"]]);export{oe as default};
