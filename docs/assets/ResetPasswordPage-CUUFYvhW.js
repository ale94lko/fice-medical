import{Q as v,T as h}from"./TextInput-B1Cb6uCW.js";import{b as w,Q as c,a as b}from"./QCard-D-XawETv.js";import{r as n,a as x,X as y,M as Q,O as e,N as a,a0 as I,S as d,aD as V,R as E,Y as u,V as S,an as A}from"./index-DkiPGnsD.js";import{Q as B}from"./QPage-yjuOD6wt.js";import{e as C}from"./use-quasar-Ctie1YIS.js";import{u as P}from"./vue-i18n.runtime-BGwwHX6I.js";import"./use-key-composition-DXtahxhC.js";const z={class:"row justify-between login-container"},M={class:"text-h6"},j={__name:"ResetPasswordPage",setup(N){const p=I(),f=C(),{t}=P(),s=n(""),o=n(!1),i=n(!1),m=x(()=>{const l=s.value.trim(),r=/^[A-Za-z0-9_-]+@[A-Za-z0-9.-]+\.[A-Za-z]{2,}$/;return l===""?"Email is required":l.length>32?"Email must be at most 32 characters":r.test(l)?"":"Please enter a valid email address"});async function g(){if(o.value=!!m.value,!o.value){i.value=!0;try{await A.post("/oauth/v1/reset-password",{email:s.value.trim()})}catch{}i.value=!1,f.notify({type:"positive",message:t("password_reset_email_sent")}),await p.push("/login")}}return(l,r)=>(Q(),y("div",z,[e(B,{class:"login-card flex flex-center"},{default:a(()=>[e(v,{class:"logo",src:"logo.png","spinner-color":"white",style:{"max-width":"115px"}}),e(w,{class:"my-card bg-grey-1"},{default:a(()=>[d("form",{onSubmit:V(g,["prevent","stop"])},[e(c,null,{default:a(()=>[d("div",M,E(u(t)("reset_password")),1)]),_:1}),e(c,{class:"login-inputs"},{default:a(()=>[e(h,{modelValue:s.value,"onUpdate:modelValue":r[0]||(r[0]=_=>s.value=_),"icon-left":"mail","test-id":"input_email",label:u(t)("email"),"error-message":m.value,error:o.value,maxlength:"32"},null,8,["modelValue","label","error-message","error"])]),_:1}),e(b,null,{default:a(()=>[e(S,{color:"primary",type:"submit",class:"full-width","data-testId":"button_continue",label:u(t)("continue"),loading:i.value},null,8,["label","loading"])]),_:1})],32)]),_:1})]),_:1})]))}};export{j as default};
