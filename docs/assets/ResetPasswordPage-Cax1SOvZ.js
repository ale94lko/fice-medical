import{Q as y,T as k}from"./TextInput-HB3PdeKl.js";import{b as I,Q as v,a as V}from"./QCard-JEOSXSi-.js";import{a as d,r as c,X as P,M as _,O as e,L as B,U as C,N as t,a0 as E,S as n,aD as N,R as w,Y as o,V as S,P as A,an as M}from"./index-DcisjHf5.js";import{e as T,f as z,Q as D}from"./constants-CVi1wmfg.js";import{Q as b}from"./QPage-Cv9smcr_.js";import{u as L}from"./vue-i18n.runtime-BpGfxidt.js";import"./use-key-composition-D53qaEXk.js";const R={class:"row justify-between login-container"},Z={class:"text-h6"},$={class:"forgot-password-container"},G={__name:"ResetPasswordPage",setup(q){const m=E(),p=T(),{t:s}=L(),h=d(()=>p.screen.width),Q=d(()=>h.value>=z.MD),l=c(""),i=c(!1),u=c(!1),f=d(()=>{const r=l.value.trim(),a=/^[A-Za-z0-9_-]+@[A-Za-z0-9.-]+\.[A-Za-z]{2,}$/;return r===""?"Email is required":r.length>32?"Email must be at most 32 characters":a.test(r)?"":"Please enter a valid email address"});async function x(){if(i.value=!!f.value,!i.value){u.value=!0;try{await M.post("/oauth/v1/reset-password",{email:l.value.trim()})}catch{}u.value=!1,p.notify({type:"positive",message:s("password_reset_email_sent")}),await m.push("/login")}}return(r,a)=>(_(),P("div",R,[e(b,{class:"login-card flex flex-center"},{default:t(()=>[e(y,{class:"logo",src:"logo.png","spinner-color":"white"}),e(I,{class:"my-card bg-grey-1"},{default:t(()=>[n("form",{onSubmit:N(x,["prevent","stop"])},[e(v,null,{default:t(()=>[n("div",Z,w(o(s)("reset_password")),1)]),_:1}),e(v,{class:"login-inputs"},{default:t(()=>[e(k,{modelValue:l.value,"onUpdate:modelValue":a[0]||(a[0]=g=>l.value=g),"icon-left":"mail","test-id":"input_email",maxlength:"32",label:o(s)("email"),"error-message":f.value,error:i.value},null,8,["modelValue","label","error-message","error"])]),_:1}),e(V,null,{default:t(()=>[e(S,{color:"primary",type:"submit",class:"full-width","data-testId":"button_continue",label:o(s)("continue"),loading:u.value},null,8,["label","loading"]),n("div",$,[e(D,{class:"forgot-password","data-testId":"button_back_to_login",onClick:a[1]||(a[1]=g=>o(m).push("/login"))},{default:t(()=>[A(w(o(s)("backToLogin")),1)]),_:1})])]),_:1})],32)]),_:1})]),_:1}),Q.value?(_(),B(b,{key:0,class:"promo-container"},{default:t(()=>a[2]||(a[2]=[n("div",{class:"promo"},null,-1)])),_:1})):C("",!0)]))}};export{G as default};
