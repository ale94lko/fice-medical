import{a as s,c as Y,r as l,j as G,I as J,h as g,T as K,b as Z,aC as ee,w as ae,au as V,g as te,_ as F,L as P,M as L,aD as le,N as m,O as c,Q as re,W as oe,X as ie,U as E,a3 as ne,a0 as se,S as N,aE as ue,Y as Q,P as R,R as M,V as ce}from"./index-D7BxVCRd.js";import{d as D,e as de,f as ge,Q as j}from"./constants-BxQwKg2b.js";import{b as me,Q as fe,a as ve}from"./QCard-BFc11EIm.js";import{Q as $}from"./QPage-DnXsUfQf.js";import{Q as ye}from"./QInput-CcuDlF-o.js";import{u as Se}from"./vue-i18n.runtime-DMb04qcF.js";const he={ratio:[String,Number]};function _e(e,r){return s(()=>{const o=Number(e.ratio||(r!==void 0?r.value:void 0));return isNaN(o)!==!0&&o>0?{paddingBottom:`${100/o}%`}:null})}const we=1.7778,be=Y({name:"QImg",props:{...he,src:String,srcset:String,sizes:String,alt:String,crossorigin:String,decoding:String,referrerpolicy:String,draggable:Boolean,loading:{type:String,default:"lazy"},loadingShowDelay:{type:[Number,String],default:0},fetchpriority:{type:String,default:"auto"},width:String,height:String,initialRatio:{type:[Number,String],default:we},placeholderSrc:String,errorSrc:String,fit:{type:String,default:"cover"},position:{type:String,default:"50% 50%"},imgClass:String,imgStyle:Object,noSpinner:Boolean,noNativeMenu:Boolean,noTransition:Boolean,spinnerColor:String,spinnerSize:String},emits:["load","error"],setup(e,{slots:r,emit:o}){const b=l(e.initialRatio),i=_e(e,b),n=te(),{registerTimeout:p,removeTimeout:f}=D(),{registerTimeout:C,removeTimeout:h}=D(),_=s(()=>e.placeholderSrc!==void 0?{src:e.placeholderSrc}:null),T=s(()=>e.errorSrc!==void 0?{src:e.errorSrc,__qerror:!0}:null),t=[l(null),l(_.value)],u=l(0),v=l(!1),w=l(!1),q=s(()=>`q-img q-img--${e.noNativeMenu===!0?"no-":""}menu`),y=s(()=>({width:e.width,height:e.height})),d=s(()=>`q-img__image ${e.imgClass!==void 0?e.imgClass+" ":""}q-img__image--with${e.noTransition===!0?"out":""}-transition q-img__image--`),I=s(()=>({...e.imgStyle,objectFit:e.fit,objectPosition:e.position}));function U(){if(h(),e.loadingShowDelay===0){v.value=!0;return}C(()=>{v.value=!0},e.loadingShowDelay)}function x(){h(),v.value=!1}function H({target:a}){V(n)===!1&&(f(),b.value=a.naturalHeight===0?.5:a.naturalWidth/a.naturalHeight,B(a,1))}function B(a,S){S===1e3||V(n)===!0||(a.complete===!0?O(a):p(()=>{B(a,S+1)},50))}function O(a){V(n)!==!0&&(u.value=u.value^1,t[u.value].value=null,x(),a.getAttribute("__qerror")!=="true"&&(w.value=!1),o("load",a.currentSrc||a.src))}function W(a){f(),x(),w.value=!0,t[u.value].value=T.value,t[u.value^1].value=_.value,o("error",a)}function z(a){const S=t[a].value,k={key:"img_"+a,class:d.value,style:I.value,alt:e.alt,crossorigin:e.crossorigin,decoding:e.decoding,referrerpolicy:e.referrerpolicy,height:e.height,width:e.width,loading:e.loading,fetchpriority:e.fetchpriority,"aria-hidden":"true",draggable:e.draggable,...S};return u.value===a?Object.assign(k,{class:k.class+"current",onLoad:H,onError:W}):k.class+="loaded",g("div",{class:"q-img__container absolute-full",key:"img"+a},g("img",k))}function X(){return v.value===!1?g("div",{key:"content",class:"q-img__content absolute-full q-anchor--skip"},Z(r[w.value===!0?"error":"default"])):g("div",{key:"loading",class:"q-img__loading absolute-full flex flex-center"},r.loading!==void 0?r.loading():e.noSpinner===!0?void 0:[g(ee,{color:e.spinnerColor,size:e.spinnerSize})])}{let a=function(){ae(()=>e.src||e.srcset||e.sizes?{src:e.src,srcset:e.srcset,sizes:e.sizes}:null,S=>{f(),w.value=!1,S===null?(x(),t[u.value^1].value=_.value):U(),t[u.value].value=S},{immediate:!0})};G.value===!0?J(a):a()}return()=>{const a=[];return i.value!==null&&a.push(g("div",{key:"filler",style:i.value})),t[0].value!==null&&a.push(z(0)),t[1].value!==null&&a.push(z(1)),a.push(g(K,{name:"q-transition--fade"},X)),g("div",{key:"main",class:q.value,style:y.value,role:"img","aria-label":e.alt},a)}}}),pe={__name:"TextInput",props:{type:{type:String,default:"text"},label:{type:String,default:"text"},iconLeft:{type:String,default:""},rules:{type:Array,default:()=>[]}},setup(e){const r=e,o=l("");return(b,i)=>(L(),P(ye,{outlined:"","lazy-rules":"",modelValue:o.value,"onUpdate:modelValue":i[0]||(i[0]=n=>o.value=n),type:r.type,label:r.label,rules:r.rules||[]},le({_:2},[e.iconLeft?{name:"prepend",fn:m(()=>[c(re,{name:e.iconLeft,class:"input-icon"},null,8,["name"])]),key:"0"}:void 0]),1032,["modelValue","type","label","rules"]))}},A=F(pe,[["__scopeId","data-v-c5e501e1"]]),Ce={class:"row justify-between login-container"},Ie={class:"forgot-password-container"},ke={__name:"LoginPage",setup(e){const r=de(),o=se(),b=oe(),i=l(""),n=l(""),p=l(!1),f=l(!1),C=l(""),h=l(!1),_=s(()=>{const y=/.+@.+\..+/.test(i.value);return i.value.trim()===""?"Email is required":y?"":"Please enter a valid email address"}),T=s(()=>n.value.trim()===""?"Password is required":""),{t}=Se(),u=s(()=>r.screen.width),v=s(()=>u.value>=ge.MD);async function w(){if(p.value=!!_.value,f.value=n.value.trim()==="",h.value=!0,!p.value&&!f.value)try{await b.login(i.value.trim(),n.value,t)&&await o.push("/")}catch(y){C.value=y.message.replace(":br",""),h.value=!1}}function q(){console.log("Forgot password clicked")}return(y,d)=>(L(),ie("div",Ce,[c($,{class:ne(["login-card flex flex-center",{mobile:!v.value}])},{default:m(()=>[c(be,{class:"logo",src:"logo.png","spinner-color":"white",style:{"max-width":"115px"}}),c(me,{class:"my-card bg-grey-1"},{default:m(()=>[N("form",{onSubmit:ue(w,["prevent","stop"])},[c(fe,{class:"login-inputs"},{default:m(()=>[c(A,{modelValue:i.value,"onUpdate:modelValue":d[0]||(d[0]=I=>i.value=I),"icon-left":"mail",label:Q(t)("email"),"error-message":_.value,error:p.value},null,8,["modelValue","label","error-message","error"]),c(A,{modelValue:n.value,"onUpdate:modelValue":d[1]||(d[1]=I=>n.value=I),"icon-left":"lock",type:"password",label:Q(t)("password"),"error-message":T.value,error:f.value},null,8,["modelValue","label","error-message","error"]),C.value?(L(),P(j,{key:0,class:"login-error-msg"},{default:m(()=>[R(M(C.value),1)]),_:1})):E("",!0)]),_:1}),c(ve,null,{default:m(()=>[c(ce,{color:"primary",type:"submit",class:"full-width",label:Q(t)("sign_in"),loading:h.value},null,8,["label","loading"]),N("div",Ie,[c(j,{onClick:q,class:"forgot-password"},{default:m(()=>[R(M(Q(t)("forgot_password")),1)]),_:1})])]),_:1})],32)]),_:1})]),_:1},8,["class"]),v.value?(L(),P($,{key:0,class:"promo-container"},{default:m(()=>d[2]||(d[2]=[N("div",{class:"promo"},null,-1)])),_:1})):E("",!0)]))}},Ne=F(ke,[["__scopeId","data-v-d05209f3"]]);export{Ne as default};
