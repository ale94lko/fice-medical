import{r as b,H as X,o as L,k as E,g as P,t as q,N as Y,q as V,h as w,v as O,w as R,a as te,E as H,G as B,c as g,a4 as K,a5 as oe,a6 as x,b as ne}from"./index-DWSOeePd.js";import{h as ie,b as le}from"./render-D4li9OTc.js";import{g as re,a as j}from"./dom-CkhisjiM.js";const se=[Element,String],ae=[null,document,document.body,document.scrollingElement,document.documentElement];function ce(e,n){let t=re(n);if(t===void 0){if(e==null)return window;t=e.closest(".scroll,.scroll-y,.overflow-auto")}return ae.includes(t)?window:t}function U(e){return e===window?window.pageYOffset||window.scrollY||document.body.scrollTop||0:e.scrollTop}function _(e){return e===window?window.pageXOffset||window.scrollX||document.body.scrollLeft||0:e.scrollLeft}function G(e,n,t=0){const o=arguments[3]===void 0?performance.now():arguments[3],i=U(e);if(t<=0){i!==n&&Q(e,n);return}requestAnimationFrame(r=>{const c=r-o,u=i+(n-i)/Math.max(c,t)*c;Q(e,u),u!==n&&G(e,n,t-c,r)})}function I(e,n,t=0){const o=arguments[3]===void 0?performance.now():arguments[3],i=_(e);if(t<=0){i!==n&&W(e,n);return}requestAnimationFrame(r=>{const c=r-o,u=i+(n-i)/Math.max(c,t)*c;W(e,u),u!==n&&I(e,n,t-c,r)})}function Q(e,n){if(e===window){window.scrollTo(window.pageXOffset||window.scrollX||document.body.scrollLeft||0,n);return}e.scrollTop=n}function W(e,n){if(e===window){window.scrollTo(n,window.pageYOffset||window.scrollY||document.body.scrollTop||0);return}e.scrollLeft=n}function ge(e,n,t){if(t){G(e,n,t);return}Q(e,n)}function we(e,n,t){if(t){I(e,n,t);return}W(e,n)}let T;function $(){if(T!==void 0)return T;const e=document.createElement("p"),n=document.createElement("div");j(e,{width:"100%",height:"200px"}),j(n,{position:"absolute",top:"0px",left:"0px",visibility:"hidden",width:"200px",height:"150px",overflow:"hidden"}),n.appendChild(e),document.body.appendChild(n);const t=e.offsetWidth;n.style.overflow="scroll";let o=e.offsetWidth;return t===o&&(o=n.clientWidth),n.remove(),T=t-o,T}function pe(e,n=!0){return!e||e.nodeType!==Node.ELEMENT_NODE?!1:n?e.scrollHeight>e.clientHeight&&(e.classList.contains("scroll")||e.classList.contains("overflow-auto")||["auto","scroll"].includes(window.getComputedStyle(e)["overflow-y"])):e.scrollWidth>e.clientWidth&&(e.classList.contains("scroll")||e.classList.contains("overflow-auto")||["auto","scroll"].includes(window.getComputedStyle(e)["overflow-x"]))}function ue(){const e=b(!X.value);return e.value===!1&&L(()=>{e.value=!0}),{isHydrated:e}}const J=typeof ResizeObserver<"u",D=J===!0?{}:{style:"display:block;position:absolute;top:0;left:0;right:0;bottom:0;height:100%;width:100%;overflow:hidden;pointer-events:none;z-index:-1;",url:"about:blank"},k=E({name:"QResizeObserver",props:{debounce:{type:[String,Number],default:100}},emits:["resize"],setup(e,{emit:n}){let t=null,o,i={width:-1,height:-1};function r(a){a===!0||e.debounce===0||e.debounce==="0"?c():t===null&&(t=setTimeout(c,e.debounce))}function c(){if(t!==null&&(clearTimeout(t),t=null),o){const{offsetWidth:a,offsetHeight:s}=o;(a!==i.width||s!==i.height)&&(i={width:a,height:s},n("resize",i))}}const{proxy:u}=P();if(u.trigger=r,J===!0){let a;const s=m=>{o=u.$el.parentNode,o?(a=new ResizeObserver(r),a.observe(o),c()):m!==!0&&V(()=>{s(!0)})};return L(()=>{s()}),q(()=>{t!==null&&clearTimeout(t),a!==void 0&&(a.disconnect!==void 0?a.disconnect():o&&a.unobserve(o))}),Y}else{let a=function(){t!==null&&(clearTimeout(t),t=null),d!==void 0&&(d.removeEventListener!==void 0&&d.removeEventListener("resize",r,O.passive),d=void 0)},s=function(){a(),o?.contentDocument&&(d=o.contentDocument.defaultView,d.addEventListener("resize",r,O.passive),c())};const{isHydrated:m}=ue();let d;return L(()=>{V(()=>{o=u.$el,o&&s()})}),q(a),()=>{if(m.value===!0)return w("object",{class:"q--avoid-card-border",style:D.style,tabindex:-1,type:"text/html",data:D.url,"aria-hidden":"true",onLoad:s})}}}}),{passive:A}=O,de=["both","horizontal","vertical"],fe=E({name:"QScrollObserver",props:{axis:{type:String,validator:e=>de.includes(e),default:"vertical"},debounce:[String,Number],scrollTarget:se},emits:["scroll"],setup(e,{emit:n}){const t={position:{top:0,left:0},direction:"down",directionChanged:!1,delta:{top:0,left:0},inflectionPoint:{top:0,left:0}};let o=null,i,r;R(()=>e.scrollTarget,()=>{a(),u()});function c(){o?.();const d=Math.max(0,U(i)),y=_(i),v={top:d-t.position.top,left:y-t.position.left};if(e.axis==="vertical"&&v.top===0||e.axis==="horizontal"&&v.left===0)return;const S=Math.abs(v.top)>=Math.abs(v.left)?v.top<0?"up":"down":v.left<0?"left":"right";t.position={top:d,left:y},t.directionChanged=t.direction!==S,t.delta=v,t.directionChanged===!0&&(t.direction=S,t.inflectionPoint=t.position),n("scroll",{...t})}function u(){i=ce(r,e.scrollTarget),i.addEventListener("scroll",s,A),s(!0)}function a(){i!==void 0&&(i.removeEventListener("scroll",s,A),i=void 0)}function s(d){if(d===!0||e.debounce===0||e.debounce==="0")c();else if(o===null){const[y,v]=e.debounce?[setTimeout(c,e.debounce),clearTimeout]:[requestAnimationFrame(c),cancelAnimationFrame];o=()=>{v(y),o=null}}}const{proxy:m}=P();return R(()=>m.$q.lang.rtl,c),L(()=>{r=m.$el.parentNode,u()}),q(()=>{o?.(),a()}),Object.assign(m,{trigger:s,getPosition:()=>t}),Y}}),be=E({name:"QPageContainer",setup(e,{slots:n}){const{proxy:{$q:t}}=P(),o=te(B,H);if(o===H)return console.error("QPageContainer needs to be child of QLayout"),H;K(oe,!0);const i=g(()=>{const r={};return o.header.space===!0&&(r.paddingTop=`${o.header.size}px`),o.right.space===!0&&(r[`padding${t.lang.rtl===!0?"Left":"Right"}`]=`${o.right.size}px`),o.footer.space===!0&&(r.paddingBottom=`${o.footer.size}px`),o.left.space===!0&&(r[`padding${t.lang.rtl===!0?"Right":"Left"}`]=`${o.left.size}px`),r});return()=>w("div",{class:"q-page-container",style:i.value},ie(n.default))}}),ye=E({name:"QLayout",props:{container:Boolean,view:{type:String,default:"hhh lpr fff",validator:e=>/^(h|l)h(h|r) lpr (f|l)f(f|r)$/.test(e.toLowerCase())},onScroll:Function,onScrollHeight:Function,onResize:Function},setup(e,{slots:n,emit:t}){const{proxy:{$q:o}}=P(),i=b(null),r=b(o.screen.height),c=b(e.container===!0?0:o.screen.width),u=b({position:0,direction:"down",inflectionPoint:0}),a=b(0),s=b(X.value===!0?0:$()),m=g(()=>"q-layout q-layout--"+(e.container===!0?"containerized":"standard")),d=g(()=>e.container===!1?{minHeight:o.screen.height+"px"}:null),y=g(()=>s.value!==0?{[o.lang.rtl===!0?"left":"right"]:`${s.value}px`}:null),v=g(()=>s.value!==0?{[o.lang.rtl===!0?"right":"left"]:0,[o.lang.rtl===!0?"left":"right"]:`-${s.value}px`,width:`calc(100% + ${s.value}px)`}:null);function S(l){if(e.container===!0||document.qScrollPrevented!==!0){const f={position:l.position.top,direction:l.direction,directionChanged:l.directionChanged,inflectionPoint:l.inflectionPoint.top,delta:l.delta.top};u.value=f,e.onScroll!==void 0&&t("scroll",f)}}function Z(l){const{height:f,width:p}=l;let h=!1;r.value!==f&&(h=!0,r.value=f,e.onScrollHeight!==void 0&&t("scrollHeight",f),F()),c.value!==p&&(h=!0,c.value=p),h===!0&&e.onResize!==void 0&&t("resize",l)}function ee({height:l}){a.value!==l&&(a.value=l,F())}function F(){if(e.container===!0){const l=r.value>a.value?$():0;s.value!==l&&(s.value=l)}}let z=null;const M={instances:{},view:g(()=>e.view),isContainer:g(()=>e.container),rootRef:i,height:r,containerHeight:a,scrollbarWidth:s,totalWidth:g(()=>c.value+s.value),rows:g(()=>{const l=e.view.toLowerCase().split(" ");return{top:l[0].split(""),middle:l[1].split(""),bottom:l[2].split("")}}),header:x({size:0,offset:0,space:!1}),right:x({size:300,offset:0,space:!1}),footer:x({size:0,offset:0,space:!1}),left:x({size:300,offset:0,space:!1}),scroll:u,animate(){z!==null?clearTimeout(z):document.body.classList.add("q-body--layout-animate"),z=setTimeout(()=>{z=null,document.body.classList.remove("q-body--layout-animate")},155)},update(l,f,p){M[l][f]=p}};if(K(B,M),$()>0){let l=function(){h=null,C.classList.remove("hide-scrollbar")},f=function(){if(h===null){if(C.scrollHeight>o.screen.height)return;C.classList.add("hide-scrollbar")}else clearTimeout(h);h=setTimeout(l,300)},p=function(N){h!==null&&N==="remove"&&(clearTimeout(h),l()),window[`${N}EventListener`]("resize",f)},h=null;const C=document.body;R(()=>e.container!==!0?"add":"remove",p),e.container!==!0&&p("add"),ne(()=>{p("remove")})}return()=>{const l=le(n.default,[w(fe,{onScroll:S}),w(k,{onResize:Z})]),f=w("div",{class:m.value,style:d.value,ref:e.container===!0?void 0:i,tabindex:-1},l);return e.container===!0?w("div",{class:"q-layout-container overflow-hidden",ref:i},[w(k,{onResize:ee}),w("div",{class:"absolute-full",style:y.value},[w("div",{class:"scroll",style:v.value},[f])])]):f}}});export{k as Q,ce as a,fe as b,ge as c,we as d,_ as e,U as f,$ as g,pe as h,ye as i,be as j,se as s};
